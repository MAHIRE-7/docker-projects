<!DOCTYPE html>
<html>
<head>
    <title>Bookmarks Manager</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        .header { text-align: center; margin-bottom: 30px; }
        .add-form { background: white; padding: 25px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .form-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .form-row input, .form-row select, .form-row textarea { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 6px; }
        .form-row textarea { min-height: 80px; resize: vertical; }
        .btn { padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; }
        .btn:hover { background: #0056b3; }
        .categories { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .category-btn { padding: 8px 16px; background: #e9ecef; border: none; border-radius: 20px; cursor: pointer; }
        .category-btn.active { background: #007bff; color: white; }
        .bookmarks { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
        .bookmark { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .bookmark h3 { margin: 0 0 10px 0; color: #333; }
        .bookmark a { color: #007bff; text-decoration: none; font-weight: 500; }
        .bookmark a:hover { text-decoration: underline; }
        .bookmark p { margin: 10px 0; color: #666; line-height: 1.4; }
        .bookmark-meta { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; }
        .category-tag { background: #e9ecef; padding: 4px 12px; border-radius: 15px; font-size: 12px; color: #666; }
        .delete-btn { background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
        .delete-btn:hover { background: #c82333; }
        .empty { text-align: center; color: #666; margin: 50px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ”– Bookmarks Manager</h1>
        <p>Save and organize your favorite websites</p>
    </div>

    <div class="add-form">
        <h3>Add New Bookmark</h3>
        <form id="bookmarkForm">
            <div class="form-row">
                <input type="text" id="title" placeholder="Website title" required>
                <input type="url" id="url" placeholder="https://example.com" required>
            </div>
            <div class="form-row">
                <textarea id="description" placeholder="Description (optional)"></textarea>
                <select id="category">
                    <option value="General">General</option>
                    <option value="Work">Work</option>
                    <option value="Learning">Learning</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="News">News</option>
                    <option value="Tools">Tools</option>
                </select>
            </div>
            <button type="submit" class="btn">Add Bookmark</button>
        </form>
    </div>

    <div class="categories">
        <button class="category-btn active" onclick="filterCategory('all')">All</button>
        <button class="category-btn" onclick="filterCategory('General')">General</button>
        <button class="category-btn" onclick="filterCategory('Work')">Work</button>
        <button class="category-btn" onclick="filterCategory('Learning')">Learning</button>
        <button class="category-btn" onclick="filterCategory('Entertainment')">Entertainment</button>
        <button class="category-btn" onclick="filterCategory('News')">News</button>
        <button class="category-btn" onclick="filterCategory('Tools')">Tools</button>
    </div>

    <div id="bookmarksContainer" class="bookmarks"></div>
    <div id="emptyState" class="empty" style="display: none;">
        <h3>No bookmarks yet</h3>
        <p>Add your first bookmark above!</p>
    </div>

    <script>
        let allBookmarks = [];
        let currentFilter = 'all';

        async function loadBookmarks() {
            try {
                const response = await fetch('/api/bookmarks');
                allBookmarks = await response.json();
                displayBookmarks();
            } catch (error) {
                console.error('Error loading bookmarks:', error);
            }
        }

        function displayBookmarks() {
            const container = document.getElementById('bookmarksContainer');
            const emptyState = document.getElementById('emptyState');
            
            const filtered = currentFilter === 'all' 
                ? allBookmarks 
                : allBookmarks.filter(b => b.category === currentFilter);
            
            if (filtered.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            container.innerHTML = filtered.map(bookmark => `
                <div class="bookmark">
                    <h3>${bookmark.title}</h3>
                    <a href="${bookmark.url}" target="_blank">${bookmark.url}</a>
                    ${bookmark.description ? `<p>${bookmark.description}</p>` : ''}
                    <div class="bookmark-meta">
                        <span class="category-tag">${bookmark.category}</span>
                        <button class="delete-btn" onclick="deleteBookmark(${bookmark.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function filterCategory(category) {
            currentFilter = category;
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            displayBookmarks();
        }

        document.getElementById('bookmarkForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const title = document.getElementById('title').value;
            const url = document.getElementById('url').value;
            const description = document.getElementById('description').value;
            const category = document.getElementById('category').value;
            
            try {
                await fetch('/api/bookmarks', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ title, url, description, category })
                });
                
                document.getElementById('bookmarkForm').reset();
                loadBookmarks();
            } catch (error) {
                console.error('Error saving bookmark:', error);
            }
        });

        async function deleteBookmark(id) {
            if (confirm('Delete this bookmark?')) {
                try {
                    await fetch(`/api/bookmarks/${id}`, { method: 'DELETE' });
                    loadBookmarks();
                } catch (error) {
                    console.error('Error deleting bookmark:', error);
                }
            }
        }

        loadBookmarks();
    </script>
</body>
</html>